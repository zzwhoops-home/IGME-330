{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://deng-z-hw3-refactor/./src/utils.ts","webpack://deng-z-hw3-refactor/./src/audio.ts","webpack://deng-z-hw3-refactor/./src/visualizer.ts","webpack://deng-z-hw3-refactor/./src/tesla-sprite.ts","webpack://deng-z-hw3-refactor/./src/bg-circle.ts","webpack://deng-z-hw3-refactor/./src/main.ts","webpack://deng-z-hw3-refactor/./src/loader.ts"],"sourcesContent":["import type { GradientEntry } from \"./visualizer\";\r\n\r\nconst makeColor = (red: number, green: number, blue: number, alpha: number = 1) => {\r\n    return `rgba(${red},${green},${blue},${alpha})`;\r\n};\r\n\r\nconst getRandom = (min: number, max: number) => {\r\n    return Math.random() * (max - min) + min;\r\n};\r\n\r\nconst getRandomColor = () => {\r\n    const floor = 35; // so that colors are not too bright or too dark \r\n    const getByte = () => getRandom(floor, 255 - floor);\r\n    return `rgba(${getByte()},${getByte()},${getByte()},1)`;\r\n};\r\n\r\nconst getLinearGradient = (ctx: CanvasRenderingContext2D, startX: number, startY: number, endX: number, endY: number, colorStops: Array<GradientEntry>) => {\r\n    let lg = ctx.createLinearGradient(startX, startY, endX, endY);\r\n    for (let stop of colorStops) {\r\n        lg.addColorStop(stop.percent, stop.color);\r\n    }\r\n    return lg;\r\n};\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API\r\nconst goFullscreen = (element) => {\r\n    if (element.requestFullscreen) {\r\n        element.requestFullscreen();\r\n    } else if (element.mozRequestFullscreen) {\r\n        element.mozRequestFullscreen();\r\n    } else if (element.mozRequestFullScreen) { // camel-cased 'S' was changed to 's' in spec\r\n        element.mozRequestFullScreen();\r\n    } else if (element.webkitRequestFullscreen) {\r\n        element.webkitRequestFullscreen();\r\n    }\r\n    // .. and do nothing if the method is not supported\r\n};\r\n\r\nexport { makeColor, getRandom, getRandomColor, getLinearGradient, goFullscreen };","// 1 - our WebAudio context, **we will export and make this public at the bottom of the file**\r\nlet audioCtx: AudioContext;\r\n\r\n// **These are \"private\" properties - these will NOT be visible outside of this module (i.e. file)**\r\n// 2 - WebAudio nodes that are part of our WebAudio audio routing graph\r\nlet element: HTMLAudioElement;\r\nlet sourceNode: MediaElementAudioSourceNode;\r\nlet analyserNode: AnalyserNode;\r\nlet gainNode: GainNode;\r\nlet waveShaperNode: WaveShaperNode;\r\nlet stereoPannerNode: StereoPannerNode;\r\n\r\n// 3 - here we are faking an enumeration\r\nconst DEFAULTS = Object.freeze({\r\n    gain: 5,\r\n    distortion: 0,\r\n    pan: 0,\r\n    numSamples: 256\r\n});\r\n\r\n// 4 - create a new array of 8-bit integers (0-255)\r\n// this is a typed array to hold the audio frequency data\r\nlet audioData = new Uint8Array(DEFAULTS.numSamples / 2);\r\n\r\n// sigmoid distortion curve sourced from\r\n// https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createWaveShaper\r\nconst makeDistortionCurve = (amount: Number) => {\r\n    const k = typeof amount === \"number\" ? amount : 50;\r\n    const n_samples = 44100;\r\n    const curve = new Float32Array(n_samples);\r\n    const deg = Math.PI / 180;\r\n\r\n    for (let i = 0; i < n_samples; i++) {\r\n        const x = (i * 2) / n_samples - 1;\r\n        curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\r\n    }\r\n    return curve;\r\n}\r\n\r\n// **Next are \"public\" methods - we are going to export all of these at the bottom of this file**\r\nconst setupWebAudio = (filePath: string) => {\r\n    const AudioContext = window.AudioContext;\r\n    audioCtx = new AudioContext();\r\n\r\n    // 2 - this creates an <audio> element\r\n    element = new Audio();\r\n\r\n    // 3 - have it point at a sound file\r\n    loadSoundFile(filePath);\r\n\r\n    // 4 - create an a source node that points at the <audio> element\r\n    sourceNode = audioCtx.createMediaElementSource(element);\r\n\r\n    // 5 - create an analyser node\r\n    // note the UK spelling of \"Analyser\"\r\n    analyserNode = audioCtx.createAnalyser();\r\n    /*\r\n    // 6\r\n    We will request DEFAULTS.numSamples number of samples or \"bins\" spaced equally \r\n    across the sound spectrum.\r\n    \r\n    If DEFAULTS.numSamples (fftSize) is 256, then the first bin is 0 Hz, the second is 172 Hz, \r\n    the third is 344Hz, and so on. Each bin contains a number between 0-255 representing \r\n    the amplitude of that frequency.\r\n    */\r\n\r\n    // fft stands for Fast Fourier Transform\r\n    analyserNode.fftSize = DEFAULTS.numSamples;\r\n\r\n    // 7 - create a gain (volume) node\r\n    gainNode = audioCtx.createGain();\r\n    gainNode.gain.value = DEFAULTS.gain;\r\n\r\n    // create two effect nodes for distortion & reverb\r\n    waveShaperNode = audioCtx.createWaveShaper();\r\n    waveShaperNode.curve = makeDistortionCurve(DEFAULTS.distortion);\r\n    waveShaperNode.oversample = \"4x\";\r\n\r\n    stereoPannerNode = audioCtx.createStereoPanner();\r\n    stereoPannerNode.pan.value = DEFAULTS.pan;\r\n\r\n    // 8 - connect the nodes - we now have an audio graph\r\n    sourceNode\r\n        .connect(analyserNode)\r\n        .connect(stereoPannerNode)\r\n        .connect(gainNode)\r\n        .connect(waveShaperNode)\r\n        .connect(audioCtx.destination);\r\n};\r\n\r\nconst loadSoundFile = (filePath: string) => {\r\n    element.src = filePath;\r\n};\r\n\r\nconst playCurrentSound = () => {\r\n    element.play();\r\n};\r\n\r\nconst pauseCurrentSound = () => {\r\n    element.pause();\r\n};\r\n\r\nconst setVolume = (value: string) => {\r\n    const numValue: number = Number(value);\r\n    gainNode.gain.value = numValue;\r\n};\r\n\r\nconst setDistortion = (value: string) => {\r\n    const numValue: number = Number(value);\r\n    const curve = makeDistortionCurve(numValue);\r\n    waveShaperNode.curve = curve;\r\n}\r\n\r\nconst setPan = (value: string) => {\r\n    const numValue: number = Number(value);\r\n    stereoPannerNode.pan.value = numValue;\r\n}\r\n\r\nexport { audioCtx, setupWebAudio, playCurrentSound, pauseCurrentSound, loadSoundFile, setVolume, setDistortion, setPan, analyserNode };","/*\r\n    The purpose of this file is to take in the analyser node and a <canvas> element: \r\n      - the module will create a drawing context that points at the <canvas> \r\n      - it will store the reference to the analyser node\r\n      - in draw(), it will loop through the data in the analyser node\r\n      - and then draw something representative on the canvas\r\n      - maybe a better name for this file/module would be *visualizer.js* ?\r\n*/\r\n\r\nimport * as utils from './utils';\r\nimport { TeslaSprite } from './tesla-sprite';\r\nimport { BGCircle } from './bg-circle'\r\n\r\nlet ctx: CanvasRenderingContext2D;\r\nlet ctxBG: CanvasRenderingContext2D;\r\nlet canvasWidth: number;\r\nlet canvasHeight: number;\r\nlet analyserNode: AnalyserNode;\r\nlet audioData: Uint8Array<ArrayBuffer>;\r\n\r\ntype DrawParams = {\r\n    showGradient: boolean,\r\n    showBars: boolean,\r\n    showCircles: boolean,\r\n    showTeslas: boolean,\r\n    timeDomain: boolean,\r\n    coilCenter: number\r\n}\r\n\r\ntype GradientEntry = {\r\n    percent: number,\r\n    color: string\r\n}\r\n\r\nlet teslaSprites = [];\r\n\r\nconst TESLA_COLORS = [\"rgba(144, 255, 70, 1)\", \"rgba(255, 171, 81, 1)\"];\r\nconst CIRCLE_COLORS = [\"rgba(58, 99, 166, 1)\", \"rgba(88, 66, 184, 1)\", \"rgba(40, 121, 91, 1)\"];\r\n\r\nlet circles = [];\r\nconst NUM_CIRCLES: number = 20;\r\n\r\nconst setupCanvas = (canvasElement, analyserNodeRef) => {\r\n    // create drawing context\r\n    ctx = canvasElement.getContext(\"2d\");\r\n    canvasWidth = canvasElement.width;\r\n    canvasHeight = canvasElement.height;\r\n    // keep a reference to the analyser node\r\n    analyserNode = analyserNodeRef;\r\n    // this is the array where the analyser data will be stored\r\n    audioData = new Uint8Array(analyserNode.fftSize / 2);\r\n\r\n    // get drawing context for BG\r\n    ctxBG = (document.querySelector(\"#bg-canvas\") as HTMLCanvasElement).getContext(\"2d\");\r\n\r\n    // create tesla sprites\r\n    teslaSprites.push(\r\n        new TeslaSprite({\r\n            x: 200,\r\n            y: 200,\r\n            color: TESLA_COLORS[0],\r\n            radius: 200,\r\n            radiusVariance: 100,\r\n            arcs: 10,\r\n            segments: 20,\r\n            segmentJitter: 5,\r\n            lineWidth: 1,\r\n            dataStart: 0.0,\r\n            dataEnd: 0.5\r\n        }),\r\n        new TeslaSprite({\r\n            x: 600,\r\n            y: 200,\r\n            color: TESLA_COLORS[1],\r\n            radius: 200,\r\n            radiusVariance: 100,\r\n            arcs: 10,\r\n            segments: 20,\r\n            segmentJitter: 5,\r\n            lineWidth: 1,\r\n            dataStart: 0.5,\r\n            dataEnd: 1.0\r\n        })\r\n    );\r\n\r\n    for (let i = 0; i < NUM_CIRCLES; i++) {\r\n        const radius = utils.getRandom(canvasWidth / 15, canvasWidth / 5);\r\n\r\n        const x = utils.getRandom(radius, canvasWidth - radius);\r\n        const y = utils.getRandom(radius, canvasHeight - radius);\r\n        const dx = utils.getRandom(-canvasWidth / 1000, canvasWidth / 1000);\r\n        const dy = utils.getRandom(-canvasHeight / 1000, canvasHeight / 1000);\r\n\r\n        circles.push(new BGCircle(\r\n            {\r\n                x: x,\r\n                y: y,\r\n                radius: radius,\r\n                dx: dx,\r\n                dy: dy,\r\n                canvasWidth: canvasWidth,\r\n                canvasHeight: canvasHeight,\r\n                color: CIRCLE_COLORS[Math.floor(Math.random() * CIRCLE_COLORS.length)]\r\n            }\r\n        ))\r\n    }\r\n}\r\n\r\nconst draw = (params: DrawParams) => {\r\n    // 1 - populate the audioData array with the frequency data from the analyserNode\r\n    // notice these arrays are passed \"by reference\"\r\n\r\n    if (params.timeDomain) {\r\n        analyserNode.getByteTimeDomainData(audioData);\r\n    }\r\n    else {\r\n        analyserNode.getByteFrequencyData(audioData);\r\n    }\r\n\r\n    // get coil slider middle\r\n    let middle = params.coilCenter;\r\n\r\n    // update ranges\r\n    teslaSprites[0].dataEnd = middle;\r\n    teslaSprites[1].dataStart = middle;\r\n\r\n    // 2 - draw background\r\n    ctx.save();\r\n    ctx.globalAlpha = 0.1;\r\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n    ctx.restore();\r\n\r\n    // 3 - draw gradient\r\n    ctxBG.fillStyle = \"#4b2386ff\";\r\n    ctxBG.fillRect(0, 0, canvasWidth, canvasHeight);\r\n    if (params.showGradient) {\r\n\r\n        circles.forEach(circle => {\r\n            circle.update();\r\n            circle.draw(ctxBG);\r\n        })\r\n\r\n        // ctx.save();\r\n        // ctx.fillStyle = gradient;\r\n        // ctx.globalAlpha = 0.3;\r\n        // ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        // ctx.restore();\r\n    }\r\n\r\n    // 4 - draw bars\r\n    if (params.showBars) {\r\n        let barSpacing = 4;\r\n        let margin = 5;\r\n        let screenWidthForBars = canvasWidth - (audioData.length * barSpacing) - margin * 2;\r\n        let barWidth = screenWidthForBars / audioData.length;\r\n\r\n        const middleIndex = middle * audioData.length;\r\n\r\n        // update tesla coil x\r\n        const spriteOneX = margin + middleIndex * (barWidth + barSpacing) / 2;\r\n        const spriteTwoX = canvasWidth - (canvasWidth - (spriteOneX * 2)) / 2;\r\n\r\n        teslaSprites[0].updateX(spriteOneX);\r\n        teslaSprites[1].updateX(spriteTwoX);\r\n\r\n        ctx.save();\r\n        ctx.globalAlpha = 0.5;\r\n\r\n        ctx.beginPath();\r\n\r\n        let coords = [];\r\n\r\n        // draw top part with quadratic curves\r\n        ctx.moveTo(margin, canvasHeight / 2 - (audioData[0] / 2));\r\n        for (let i = 0; i < audioData.length; i++) {\r\n            let x = margin + i * (barWidth + barSpacing);\r\n            let y = canvasHeight / 2 - (audioData[i] / 2);\r\n\r\n            // add coordinates to draw mirrored image\r\n            coords.push([x, canvasHeight / 2 + (audioData[i] / 2)]);\r\n\r\n            if (i < audioData.length - 1) {\r\n                let nextX = margin + (i + 1) * (barWidth + barSpacing);\r\n                let nextY = canvasHeight / 2 - (audioData[i + 1] / 2);\r\n\r\n                if (i === 0) {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n\r\n                // use the midpoint as the control point, interpolating smoothly\r\n                let midX = (nextX + x) / 2;\r\n                let midY = (nextY + y) / 2;\r\n\r\n                ctx.quadraticCurveTo(x, y, midX, midY);\r\n            }\r\n            else {\r\n                // line to the last point\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n\r\n        // draw bottom part, mirrored to be symmetric\r\n        for (let i = coords.length - 1; i > 0; i--) {\r\n            let x = coords[i][0];\r\n            let y = coords[i][1];\r\n\r\n            if (i < audioData.length - 1) {\r\n                let nextX = coords[i - 1][0];\r\n                let nextY = coords[i - 1][1];\r\n\r\n                if (i === 0) {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n\r\n                let midX = (nextX + x) / 2;\r\n                let midY = (nextY + y) / 2;\r\n\r\n                ctx.quadraticCurveTo(x, y, midX, midY);\r\n            }\r\n            else {\r\n                // line to the last point\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n\r\n        ctx.closePath();\r\n\r\n        let gradient = utils.getLinearGradient(ctx, 0, 0, canvasWidth, 0, [\r\n            { percent: 0, color: TESLA_COLORS[0] },\r\n            { percent: +middle - 0.05 < 0.01 ? 0 : +middle - 0.05, color: TESLA_COLORS[0] },\r\n            { percent: +middle + 0.05 > 0.99 ? 0.99 : +middle + 0.05, color: TESLA_COLORS[1] },\r\n            { percent: middle, color: TESLA_COLORS[1] }\r\n        ]);\r\n        ctx.fillStyle = gradient;\r\n        ctx.fill();\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    // 5 - draw circles\r\n    if (params.showCircles) {\r\n        let maxRadius = canvasHeight / 4;\r\n        ctx.save();\r\n        ctx.globalAlpha = 0.5;\r\n\r\n        audioData.forEach((element, i) => {\r\n            let percent = element / 255;\r\n\r\n            // red-ish circles\r\n            let circleRadius = percent * maxRadius;\r\n            ctx.beginPath();\r\n            ctx.fillStyle = utils.makeColor(58, 99, 166, 0.34 - percent / 3.0);\r\n            ctx.arc(canvasWidth / 2, canvasHeight / 2, circleRadius, 0, 2 * Math.PI, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n\r\n            // blue-ish circles, bigger, more transparent\r\n            ctx.beginPath();\r\n            ctx.fillStyle = utils.makeColor(88, 66, 184, 0.1 - percent / 10.0);\r\n            ctx.arc(canvasWidth / 2, canvasHeight / 2, circleRadius * 1.5, 0, 2 * Math.PI, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n\r\n            // yellow-ish circles, smaller\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = utils.makeColor(40, 121, 91, 0.5 - percent / 5.0);\r\n            ctx.arc(canvasWidth / 2, canvasHeight / 2, circleRadius * 0.5, 0, 2 * Math.PI, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n            ctx.restore();\r\n        });\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    if (params.showTeslas) {\r\n        teslaSprites.forEach(sprite => {\r\n            sprite.update(audioData);\r\n            sprite.draw(ctx);\r\n        })\r\n    }\r\n}\r\n\r\nexport { setupCanvas, draw, DrawParams, GradientEntry };","import { getRandom } from \"./utils\"\r\n\r\ntype TeslaParams = {\r\n    x: number,\r\n    y: number,\r\n    color: string\r\n    radius: number,\r\n    radiusVariance: number,\r\n    arcs: number,\r\n    segments: number,\r\n    segmentJitter: number,\r\n    lineWidth: number,\r\n    dataStart: number,\r\n    dataEnd: number\r\n};\r\n\r\nclass TeslaSprite {\r\n    x: number; y: number;\r\n    color: string;\r\n    radius: number; radiusVariance: number;\r\n    arcs: number; segments: number; segmentJitter: number;\r\n    lineWidth: number;\r\n    dataStart: number; dataEnd: number;\r\n\r\n    constructor(params: TeslaParams) {\r\n        this.x = params.x;\r\n        this.y = params.y;\r\n        this.color = params.color;\r\n        this.radius = params.radius;\r\n        this.radiusVariance = params.radiusVariance;\r\n        this.arcs = params.arcs;\r\n        this.segments = params.segments;\r\n        this.segmentJitter = params.segmentJitter;\r\n        this.lineWidth = params.lineWidth;\r\n        this.dataStart = params.dataStart;\r\n        this.dataEnd = params.dataEnd;\r\n    }\r\n\r\n    update(audioData: Uint8Array) {\r\n        // creates a split of data, then finds the average value from that data to update the lightning\r\n        const length = audioData.length || 0;\r\n        const start = Math.floor(this.dataStart * length);\r\n        const end = Math.round(this.dataEnd * length);\r\n\r\n        const split = audioData.slice(start, end);\r\n\r\n        const audioAvg = split.reduce((total, num) => total + num, 0) / (end - start);\r\n\r\n        this.radius = audioAvg;\r\n        this.radiusVariance = audioAvg;\r\n        this.arcs = Math.round(audioAvg / 30);\r\n        this.segmentJitter = (1.3 - (this.dataEnd - this.dataStart)) * 8;\r\n    }\r\n\r\n    updateX(newX: number) {\r\n        this.x = newX;\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n\r\n        for (let i = 1; i <= this.arcs; i++) {\r\n            const vec = this.randomVec();\r\n\r\n            let prevSegmentVec = new Vector2(0, 0);\r\n            let curSegmentVec = new Vector2(0, 0);\r\n\r\n            for (let j = 0; j < this.segments; j++) {\r\n                curSegmentVec = vec.scaled(j / this.segments);\r\n\r\n                curSegmentVec = curSegmentVec.addNoise(this.segmentJitter);\r\n\r\n                ctx.strokeStyle = this.color;\r\n                ctx.lineWidth = this.lineWidth;\r\n\r\n                ctx.globalAlpha = this.radius / 255;\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(this.x + prevSegmentVec.x, this.y + prevSegmentVec.y);\r\n                ctx.lineTo(this.x + curSegmentVec.x, this.y + curSegmentVec.y);\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n                prevSegmentVec = curSegmentVec;\r\n            }\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    randomVec() {\r\n        // get random direction, multiplied by radius with jitter\r\n        let radius = this.radius + getRandom(-this.radiusVariance, this.radiusVariance);\r\n        // clamp to 0\r\n        if (radius < 0) {\r\n            radius = 0;\r\n        }\r\n\r\n        const angle = getRandom(0, Math.PI * 2);\r\n\r\n        const x = Math.cos(angle) * radius;\r\n        const y = Math.sin(angle) * radius;\r\n\r\n        return new Vector2(x, y);\r\n    }\r\n}\r\n\r\nclass Vector2 {\r\n    x: number; y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    normalized() {\r\n        let length = this.length();\r\n        return new Vector2(this.x / length, this.y / length);\r\n    }\r\n\r\n    length() {\r\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\r\n    }\r\n\r\n    scaled(value: number) {\r\n        return new Vector2(this.x * value, this.y * value);\r\n    }\r\n\r\n    addNoise(value: number) {\r\n        return new Vector2(this.x + getRandom(-value, value), this.y + getRandom(-value, value));\r\n    }\r\n}\r\n\r\nexport { TeslaSprite };","type BGCircleParams = {\r\n    x: number,\r\n    y: number,\r\n    radius: number,\r\n    dx: number,\r\n    dy: number,\r\n    canvasWidth: number,\r\n    canvasHeight: number,\r\n    color: string\r\n};\r\n\r\nclass BGCircle {\r\n    x: number; y: number;\r\n    radius: number;\r\n    dx: number; dy: number;\r\n    canvasWidth: number; canvasHeight: number;\r\n    color: string;\r\n\r\n    constructor(params: BGCircleParams) {\r\n        this.x = params.x;\r\n        this.y = params.y;\r\n        this.radius = params.radius;\r\n        this.dx = params.dx;\r\n        this.dy = params.dy;\r\n        this.canvasWidth = params.canvasWidth;\r\n        this.canvasHeight = params.canvasHeight;\r\n        this.color = params.color;\r\n    }\r\n\r\n    update() {\r\n        if (this.x + this.radius > this.canvasWidth || this.x - this.radius < 0) {\r\n            this.dx = -this.dx;\r\n        }\r\n        if (this.y + this.radius > this.canvasHeight || this.y - this.radius < 0) {\r\n            this.dy = -this.dy;\r\n        }\r\n\r\n        this.x += this.dx;\r\n        this.y += this.dy;\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n\r\n        ctx.fillStyle = this.color;\r\n        ctx.beginPath();\r\n        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport { BGCircle };","/*\r\n    main.js is primarily responsible for hooking up the UI to the rest of the application \r\n    and setting up the main event loop\r\n*/\r\n\r\n// We will write the functions in this file in the traditional ES5 way\r\n// In this instance, we feel the code is more readable if written this way\r\n// If you want to re-write these as ES6 arrow functions, to be consistent with the other files, go ahead!\r\n\r\nimport * as utils from './utils';\r\nimport * as audio from './audio'\r\nimport * as canvas from './visualizer';\r\n\r\nconst drawParams: canvas.DrawParams = {\r\n    showGradient: true,\r\n    showBars: true,\r\n    showCircles: true,\r\n    showTeslas: true,\r\n    timeDomain: false,\r\n    coilCenter: 0.5\r\n};\r\n\r\n// 1 - here we are faking an enumeration\r\nconst DEFAULTS = Object.freeze({\r\n    sound1: \"media/Blessing Song.mp3\"\r\n});\r\n\r\nconst DEFAULT_FPS = 60;\r\nconst JSON_FILE_PATH = \"data/av-data.json\";\r\n\r\nconst loadJSON = () => {\r\n    fetch(JSON_FILE_PATH)\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            // setup title\r\n            const pageTitle = document.querySelector(\"title\");\r\n            const titleElement = document.querySelector(\"#title\");\r\n            pageTitle.innerHTML = data.title;\r\n            titleElement.innerHTML = data.title;\r\n\r\n            // setup options\r\n            const trackSelect = document.querySelector(\"#track-select\");\r\n            const tracks = data.audio_files;\r\n            const options = tracks\r\n                .map(track => `<option value=\"${track.filepath}\">${track.metadata.title}</option>`)\r\n                .join(\"\\n\");\r\n            trackSelect.innerHTML = options;\r\n\r\n            // setup instructions\r\n            const instructionsElement = document.querySelector(\"#instructions\");\r\n            instructionsElement.innerHTML = data.instructions;\r\n        })\r\n        .catch(error => {\r\n            console.log(`Warning, error occurred: ${error}`);\r\n            return null;\r\n        })\r\n};\r\n\r\nconst init = () => {\r\n    audio.setupWebAudio(DEFAULTS.sound1);\r\n\r\n    console.log(\"init called\");\r\n\r\n    // load items from JSON\r\n    loadJSON();\r\n\r\n    let canvasElement = document.querySelector(\"#fg-canvas\"); // hookup <canvas> element\r\n    let canvasDiv = document.querySelector(\"#canvas\");\r\n    setupUI(canvasElement, canvasDiv);\r\n\r\n    canvas.setupCanvas(canvasElement, audio.analyserNode);\r\n\r\n    loop();\r\n}\r\n\r\nconst setupUI = (canvasElement, canvasDiv) => {\r\n    // A - hookup fullscreen button\r\n    const fsButton = document.querySelector(\"#fs-button\") as HTMLButtonElement;\r\n\r\n    // add .onclick event to button\r\n    fsButton.onclick = e => {\r\n        console.log(\"goFullscreen() called\");\r\n        utils.goFullscreen(canvasDiv);\r\n    };\r\n\r\n    // B - hookup play button\r\n    const playButton = document.querySelector(\"#play-button\") as HTMLButtonElement;\r\n\r\n    playButton.onclick = e => {\r\n        console.log(`audioCtx.state before = ${audio.audioCtx.state}`);\r\n\r\n        // check if context is in suspened state (autoplay policy)\r\n        if (audio.audioCtx.state == \"suspended\") {\r\n            audio.audioCtx.resume();\r\n        }\r\n\r\n        const target = e.target as HTMLButtonElement;\r\n        console.log(`audioCtx.state after = ${audio.audioCtx.state}`);\r\n        if (target.dataset.playing == \"no\") {\r\n            // if track is currently paused, play it\r\n            audio.playCurrentSound();\r\n            target.dataset.playing = \"yes\";\r\n        }\r\n        // if track is playing, pause it\r\n        else {\r\n            audio.pauseCurrentSound();\r\n            target.dataset.playing = \"no\";\r\n        }\r\n    };\r\n\r\n    // C - hookup volume slider & label\r\n    let volumeSlider = document.querySelector(\"#volume-slider\") as HTMLInputElement;\r\n    let volumeLabel = document.querySelector(\"#volume-label\") as HTMLLabelElement;\r\n\r\n    // add .oninput event to slider\r\n    volumeSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        //set the gain\r\n        audio.setVolume(target.value);\r\n\r\n        const numValue = Number(target.value);\r\n        // update value of label to match value of slider\r\n        volumeLabel.innerHTML = String(Math.round((numValue / 2 * 100)));\r\n    };\r\n\r\n    // set value of label to match initial value of slider\r\n    volumeSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    // setup sliders for distortion and pan\r\n    let distortionSlider = document.querySelector(\"#distortion-slider\") as HTMLInputElement;\r\n    let distortionLabel = document.querySelector(\"#distortion-label\") as HTMLLabelElement;\r\n\r\n    distortionSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        // set distortion\r\n        audio.setDistortion(target.value);\r\n\r\n        const numValue = Number(target.value);\r\n        // update label\r\n        distortionLabel.innerHTML = String(Math.round(numValue));\r\n    };\r\n\r\n    // initial value\r\n    distortionSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    let panSlider = document.querySelector(\"#pan-slider\") as HTMLInputElement;\r\n    let panLabel = document.querySelector(\"#pan-label\") as HTMLLabelElement;\r\n\r\n    panSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        // set pan\r\n        audio.setPan(target.value);\r\n\r\n        // update label\r\n        panLabel.innerHTML = target.value;\r\n    };\r\n\r\n    // initial value\r\n    panSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    let coilSlider = document.querySelector(\"#coil-slider\") as HTMLInputElement;\r\n    let coilLabel = document.querySelector(\"#coil-label\") as HTMLLabelElement;\r\n\r\n    coilSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        // set pan\r\n        drawParams.coilCenter = Number(target.value);\r\n        // update label\r\n        coilLabel.innerHTML = target.value;\r\n    };\r\n\r\n    // initial value\r\n    coilSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    // D - hookup track <select>\r\n    let trackSelect = document.querySelector(\"#track-select\") as HTMLSelectElement;\r\n    // add .onchange event to <select>\r\n    trackSelect.onchange = e => {\r\n        const target = e.target as HTMLSelectElement;\r\n\r\n        audio.loadSoundFile(target.value);\r\n        // pause the current track if it is playing\r\n        if (playButton.dataset.playButton == \"yes\") {\r\n            playButton.dispatchEvent(new MouseEvent(\"click\"));\r\n        }\r\n    };\r\n\r\n    // E - setup and hookup checkboxes\r\n    const gradientCB = document.querySelector(\"#gradient-cb\") as HTMLInputElement;\r\n    const barsCB = document.querySelector(\"#bars-cb\") as HTMLInputElement;\r\n    const circlesCB = document.querySelector(\"#circles-cb\") as HTMLInputElement;\r\n    const teslaCB = document.querySelector(\"#tesla-cb\") as HTMLInputElement;\r\n    const domainCB = document.querySelector(\"#domain-type-cb\") as HTMLInputElement;\r\n\r\n    // everything is checked to start\r\n    gradientCB.checked = drawParams.showGradient;\r\n    barsCB.checked = drawParams.showBars;\r\n    circlesCB.checked = drawParams.showCircles;\r\n    teslaCB.checked = drawParams.showTeslas;\r\n    domainCB.checked = drawParams.timeDomain;\r\n\r\n    // add event listeners for everything\r\n    gradientCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showGradient = !drawParams.showGradient;\r\n        gradientCB.checked = drawParams.showGradient;\r\n    });\r\n\r\n    barsCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showBars = !drawParams.showBars;\r\n        barsCB.checked = drawParams.showBars;\r\n    });\r\n\r\n    circlesCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showCircles = !drawParams.showCircles;\r\n        circlesCB.checked = drawParams.showCircles;\r\n    });\r\n\r\n    teslaCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showTeslas = !drawParams.showTeslas;\r\n        teslaCB.checked = drawParams.showTeslas;\r\n    });\r\n\r\n    domainCB.addEventListener(\"change\", (e) => {\r\n        drawParams.timeDomain = !drawParams.timeDomain;\r\n        domainCB.checked = drawParams.timeDomain;\r\n    });\r\n\r\n} // end setupUI\r\n\r\nconst loop = () => {\r\n    // run at 60 FPS always\r\n    setTimeout(() => {\r\n        loop();\r\n    }, 1000 / DEFAULT_FPS);\r\n\r\n    canvas.draw(drawParams);\r\n}\r\n\r\nexport { init };","import * as main from \"./main\";\r\n\r\nwindow.onload = () => {\r\n    console.log(\"window.onload called\");\r\n    // 1 - do preload here - load fonts, images, additional sounds, etc...\r\n\r\n    // 2 - start up app\r\n    main.init();\r\n}"],"names":["audioCtx","sourceNode","analyserNode","gainNode","waveShaperNode","stereoPannerNode","ctx","ctxBG","canvasWidth","canvasHeight","makeColor","red","green","blue","alpha","getRandom","min","max","Math","random","DEFAULTS","Object","freeze","gain","distortion","pan","numSamples","makeDistortionCurve","Uint8Array","amount","k","n_samples","curve","Float32Array","deg","PI","i","x","abs","loadSoundFile","filePath","src","params","this","y","color","radius","radiusVariance","arcs","segments","segmentJitter","lineWidth","dataStart","dataEnd","update","audioData","length","start","floor","end","round","audioAvg","slice","reduce","total","num","updateX","newX","draw","save","vec","randomVec","prevSegmentVec","Vector2","curSegmentVec","j","scaled","addNoise","strokeStyle","globalAlpha","beginPath","moveTo","lineTo","closePath","stroke","restore","angle","cos","sin","normalized","sqrt","pow","value","dx","dy","fillStyle","arc","fill","teslaSprites","TESLA_COLORS","CIRCLE_COLORS","circles","drawParams","showGradient","showBars","showCircles","showTeslas","timeDomain","coilCenter","sound1","setupUI","canvasElement","canvasDiv","document","querySelector","onclick","e","element","console","log","requestFullscreen","mozRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","playButton","state","resume","target","dataset","playing","play","pause","volumeSlider","volumeLabel","oninput","numValue","Number","innerHTML","String","dispatchEvent","Event","distortionSlider","distortionLabel","panSlider","panLabel","coilSlider","coilLabel","onchange","MouseEvent","gradientCB","barsCB","circlesCB","teslaCB","domainCB","checked","addEventListener","loop","setTimeout","getByteTimeDomainData","getByteFrequencyData","middle","clearRect","fillRect","forEach","circle","barWidth","margin","spriteOneX","spriteTwoX","coords","push","nextX","nextY","midX","midY","quadraticCurveTo","gradient","startX","startY","endX","endY","colorStops","lg","createLinearGradient","addColorStop","percent","circleRadius","sprite","window","onload","AudioContext","Audio","createMediaElementSource","createAnalyser","fftSize","createGain","createWaveShaper","oversample","createStereoPanner","connect","destination","fetch","then","response","json","data","pageTitle","titleElement","title","trackSelect","options","audio_files","map","track","filepath","metadata","join","instructions","catch","error","analyserNodeRef","getContext","width","height","TeslaSprite","BGCircle"],"ignoreList":[],"sourceRoot":""}