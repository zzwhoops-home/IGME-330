{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://deng-z-hw3-refactor/./src/utils.ts","webpack://deng-z-hw3-refactor/./src/enums.ts","webpack://deng-z-hw3-refactor/./src/audio.ts","webpack://deng-z-hw3-refactor/./src/visualizer.ts","webpack://deng-z-hw3-refactor/./src/tesla-sprite.ts","webpack://deng-z-hw3-refactor/./src/bg-circle.ts","webpack://deng-z-hw3-refactor/./src/main.ts","webpack://deng-z-hw3-refactor/./src/loader.ts"],"sourcesContent":["import type { GradientEntry } from \"./visualizer\";\r\n\r\nconst makeColor = (red: number, green: number, blue: number, alpha: number = 1) => {\r\n    return `rgba(${red},${green},${blue},${alpha})`;\r\n};\r\n\r\nconst getRandom = (min: number, max: number) => {\r\n    return Math.random() * (max - min) + min;\r\n};\r\n\r\nconst getRandomColor = () => {\r\n    const floor = 35; // so that colors are not too bright or too dark \r\n    const getByte = () => getRandom(floor, 255 - floor);\r\n    return `rgba(${getByte()},${getByte()},${getByte()},1)`;\r\n};\r\n\r\nconst getLinearGradient = (ctx: CanvasRenderingContext2D, startX: number, startY: number, endX: number, endY: number, colorStops: Array<GradientEntry>) => {\r\n    let lg = ctx.createLinearGradient(startX, startY, endX, endY);\r\n    for (let stop of colorStops) {\r\n        lg.addColorStop(stop.percent, stop.color);\r\n    }\r\n    return lg;\r\n};\r\n\r\ninterface FullscreenElement extends Element {\r\n    requestFullscreen: (options?: FullscreenOptions) => Promise<void>; // required\r\n    mozRequestFullscreen?: (options?: FullscreenOptions) => Promise<void>;\r\n    mozRequestFullScreen?: (options?: FullscreenOptions) => Promise<void>;\r\n    webkitRequestFullscreen?: (options?: FullscreenOptions) => Promise<void>;\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API\r\nconst goFullscreen = (element: FullscreenElement) => {\r\n    if (element.requestFullscreen) {\r\n        element.requestFullscreen();\r\n    } else if (element.mozRequestFullscreen) {\r\n        element.mozRequestFullscreen();\r\n    } else if (element.mozRequestFullScreen) { // camel-cased 'S' was changed to 's' in spec\r\n        element.mozRequestFullScreen();\r\n    } else if (element.webkitRequestFullscreen) {\r\n        element.webkitRequestFullscreen();\r\n    }\r\n    // .. and do nothing if the method is not supported\r\n};\r\n\r\nexport { makeColor, getRandom, getRandomColor, getLinearGradient, goFullscreen };","export enum AudioDefaults {\r\n    GAIN = 5,\r\n    DISTORTION = 0,\r\n    PAN = 0,\r\n    NUM_SAMPLES = 256\r\n};\r\n\r\nexport enum DefaultSong {\r\n    sound1 = \"media/Blessing Song.mp3\"\r\n}","import { AudioDefaults } from \"./enums\";\r\n\r\nlet audioCtx: AudioContext;\r\n\r\n// **These are \"private\" properties - these will NOT be visible outside of this module (i.e. file)**\r\n// 2 - WebAudio nodes that are part of our WebAudio audio routing graph\r\nlet element: HTMLAudioElement;\r\nlet sourceNode: MediaElementAudioSourceNode;\r\nlet analyserNode: AnalyserNode;\r\nlet gainNode: GainNode;\r\nlet waveShaperNode: WaveShaperNode;\r\nlet stereoPannerNode: StereoPannerNode;\r\n\r\n// 4 - create a new array of 8-bit integers (0-255)\r\n// this is a typed array to hold the audio frequency data\r\nlet audioData = new Uint8Array(AudioDefaults.NUM_SAMPLES / 2);\r\n\r\n// sigmoid distortion curve sourced from\r\n// https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createWaveShaper\r\nconst makeDistortionCurve = (amount: number) => {\r\n    const k = typeof amount === \"number\" ? amount : 50;\r\n    const n_samples = 44100;\r\n    const curve = new Float32Array(n_samples);\r\n    const deg = Math.PI / 180;\r\n\r\n    for (let i = 0; i < n_samples; i++) {\r\n        const x = (i * 2) / n_samples - 1;\r\n        curve[i] = ((3 + k) * x * 20 * deg) / (Math.PI + k * Math.abs(x));\r\n    }\r\n    return curve;\r\n}\r\n\r\n// **Next are \"public\" methods - we are going to export all of these at the bottom of this file**\r\nconst setupWebAudio = (filePath: string) => {\r\n    const AudioContext = window.AudioContext;\r\n    audioCtx = new AudioContext();\r\n\r\n    // 2 - this creates an <audio> element\r\n    element = new Audio();\r\n\r\n    // 3 - have it point at a sound file\r\n    loadSoundFile(filePath);\r\n\r\n    // 4 - create an a source node that points at the <audio> element\r\n    sourceNode = audioCtx.createMediaElementSource(element);\r\n\r\n    // 5 - create an analyser node\r\n    // note the UK spelling of \"Analyser\"\r\n    analyserNode = audioCtx.createAnalyser();\r\n    /*\r\n    // 6\r\n    We will request AudioDefaults.numSamples number of samples or \"bins\" spaced equally \r\n    across the sound spectrum.\r\n    \r\n    If AudioDefaults.numSamples (fftSize) is 256, then the first bin is 0 Hz, the second is 172 Hz, \r\n    the third is 344Hz, and so on. Each bin contains a number between 0-255 representing \r\n    the amplitude of that frequency.\r\n    */\r\n\r\n    // fft stands for Fast Fourier Transform\r\n    analyserNode.fftSize = AudioDefaults.NUM_SAMPLES;\r\n\r\n    // 7 - create a gain (volume) node\r\n    gainNode = audioCtx.createGain();\r\n    gainNode.gain.value = AudioDefaults.GAIN;\r\n\r\n    // create two effect nodes for distortion & reverb\r\n    waveShaperNode = audioCtx.createWaveShaper();\r\n    waveShaperNode.curve = makeDistortionCurve(AudioDefaults.DISTORTION);\r\n    waveShaperNode.oversample = \"4x\";\r\n\r\n    stereoPannerNode = audioCtx.createStereoPanner();\r\n    stereoPannerNode.pan.value = AudioDefaults.PAN;\r\n\r\n    // 8 - connect the nodes - we now have an audio graph\r\n    sourceNode\r\n        .connect(analyserNode)\r\n        .connect(stereoPannerNode)\r\n        .connect(gainNode)\r\n        .connect(waveShaperNode)\r\n        .connect(audioCtx.destination);\r\n};\r\n\r\nconst loadSoundFile = (filePath: string) => {\r\n    element.src = filePath;\r\n};\r\n\r\nconst playCurrentSound = () => {\r\n    element.play();\r\n};\r\n\r\nconst pauseCurrentSound = () => {\r\n    element.pause();\r\n};\r\n\r\nconst setVolume = (value: string) => {\r\n    const numValue: number = Number(value);\r\n    gainNode.gain.value = numValue;\r\n};\r\n\r\nconst setDistortion = (value: string) => {\r\n    const numValue: number = Number(value);\r\n    const curve = makeDistortionCurve(numValue);\r\n    waveShaperNode.curve = curve;\r\n}\r\n\r\nconst setPan = (value: string) => {\r\n    const numValue: number = Number(value);\r\n    stereoPannerNode.pan.value = numValue;\r\n}\r\n\r\nexport { audioCtx, setupWebAudio, playCurrentSound, pauseCurrentSound, loadSoundFile, setVolume, setDistortion, setPan, analyserNode };","/*\r\n    The purpose of this file is to take in the analyser node and a <canvas> element: \r\n      - the module will create a drawing context that points at the <canvas> \r\n      - it will store the reference to the analyser node\r\n      - in draw(), it will loop through the data in the analyser node\r\n      - and then draw something representative on the canvas\r\n      - maybe a better name for this file/module would be *visualizer.js* ?\r\n*/\r\n\r\nimport * as utils from './utils';\r\nimport { TeslaSprite } from './tesla-sprite';\r\nimport { BGCircle } from './bg-circle'\r\n\r\nlet ctx: CanvasRenderingContext2D;\r\nlet ctxBG: CanvasRenderingContext2D;\r\nlet canvasWidth: number;\r\nlet canvasHeight: number;\r\nlet analyserNode: AnalyserNode;\r\nlet audioData: Uint8Array<ArrayBuffer>;\r\n\r\ntype DrawParams = {\r\n    showGradient: boolean,\r\n    showBars: boolean,\r\n    showCircles: boolean,\r\n    showTeslas: boolean,\r\n    timeDomain: boolean,\r\n    coilCenter: number\r\n}\r\n\r\ntype GradientEntry = {\r\n    percent: number,\r\n    color: string\r\n}\r\n\r\nlet teslaSprites = [];\r\n\r\nconst TESLA_COLORS = [\"rgba(144, 255, 70, 1)\", \"rgba(255, 171, 81, 1)\"];\r\nconst CIRCLE_COLORS = [\"rgba(58, 99, 166, 1)\", \"rgba(88, 66, 184, 1)\", \"rgba(40, 121, 91, 1)\"];\r\n\r\nlet circles = [];\r\nconst NUM_CIRCLES: number = 20;\r\n\r\nconst setupCanvas = (canvasElement: HTMLCanvasElement, analyserNodeRef: AnalyserNode) => {\r\n    // create drawing context\r\n    ctx = canvasElement.getContext(\"2d\");\r\n    canvasWidth = canvasElement.width;\r\n    canvasHeight = canvasElement.height;\r\n    // keep a reference to the analyser node\r\n    analyserNode = analyserNodeRef;\r\n    // this is the array where the analyser data will be stored\r\n    audioData = new Uint8Array(analyserNode.fftSize / 2);\r\n\r\n    // get drawing context for BG\r\n    ctxBG = (document.querySelector(\"#bg-canvas\") as HTMLCanvasElement).getContext(\"2d\");\r\n\r\n    // create tesla sprites\r\n    teslaSprites.push(\r\n        new TeslaSprite({\r\n            x: 200,\r\n            y: 200,\r\n            color: TESLA_COLORS[0],\r\n            radius: 200,\r\n            radiusVariance: 100,\r\n            arcs: 10,\r\n            segments: 20,\r\n            segmentJitter: 5,\r\n            lineWidth: 1,\r\n            dataStart: 0.0,\r\n            dataEnd: 0.5\r\n        }),\r\n        new TeslaSprite({\r\n            x: 600,\r\n            y: 200,\r\n            color: TESLA_COLORS[1],\r\n            radius: 200,\r\n            radiusVariance: 100,\r\n            arcs: 10,\r\n            segments: 20,\r\n            segmentJitter: 5,\r\n            lineWidth: 1,\r\n            dataStart: 0.5,\r\n            dataEnd: 1.0\r\n        })\r\n    );\r\n\r\n    for (let i = 0; i < NUM_CIRCLES; i++) {\r\n        const radius = utils.getRandom(canvasWidth / 15, canvasWidth / 5);\r\n\r\n        const x = utils.getRandom(radius, canvasWidth - radius);\r\n        const y = utils.getRandom(radius, canvasHeight - radius);\r\n        const dx = utils.getRandom(-canvasWidth / 1000, canvasWidth / 1000);\r\n        const dy = utils.getRandom(-canvasHeight / 1000, canvasHeight / 1000);\r\n\r\n        circles.push(new BGCircle(\r\n            {\r\n                x: x,\r\n                y: y,\r\n                radius: radius,\r\n                dx: dx,\r\n                dy: dy,\r\n                canvasWidth: canvasWidth,\r\n                canvasHeight: canvasHeight,\r\n                color: CIRCLE_COLORS[Math.floor(Math.random() * CIRCLE_COLORS.length)]\r\n            }\r\n        ))\r\n    }\r\n}\r\n\r\nconst draw = (params: DrawParams) => {\r\n    // 1 - populate the audioData array with the frequency data from the analyserNode\r\n    // notice these arrays are passed \"by reference\"\r\n\r\n    if (params.timeDomain) {\r\n        analyserNode.getByteTimeDomainData(audioData);\r\n    }\r\n    else {\r\n        analyserNode.getByteFrequencyData(audioData);\r\n    }\r\n\r\n    // get coil slider middle\r\n    let middle = params.coilCenter;\r\n\r\n    // update ranges\r\n    teslaSprites[0].dataEnd = middle;\r\n    teslaSprites[1].dataStart = middle;\r\n\r\n    // 2 - draw background\r\n    ctx.save();\r\n    ctx.globalAlpha = 0.1;\r\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n    ctx.restore();\r\n\r\n    // 3 - draw gradient\r\n    ctxBG.fillStyle = \"#4b2386ff\";\r\n    ctxBG.fillRect(0, 0, canvasWidth, canvasHeight);\r\n    if (params.showGradient) {\r\n\r\n        circles.forEach(circle => {\r\n            circle.update();\r\n            circle.draw(ctxBG);\r\n        })\r\n    }\r\n\r\n    // 4 - draw bars\r\n    if (params.showBars) {\r\n        let barSpacing = 4;\r\n        let margin = 5;\r\n        let screenWidthForBars = canvasWidth - (audioData.length * barSpacing) - margin * 2;\r\n        let barWidth = screenWidthForBars / audioData.length;\r\n\r\n        const middleIndex = middle * audioData.length;\r\n\r\n        // update tesla coil x\r\n        const spriteOneX = margin + middleIndex * (barWidth + barSpacing) / 2;\r\n        const spriteTwoX = canvasWidth - (canvasWidth - (spriteOneX * 2)) / 2;\r\n\r\n        teslaSprites[0].updateX(spriteOneX);\r\n        teslaSprites[1].updateX(spriteTwoX);\r\n\r\n        ctx.save();\r\n        ctx.globalAlpha = 0.5;\r\n\r\n        ctx.beginPath();\r\n\r\n        let coords = [];\r\n\r\n        // draw top part with quadratic curves\r\n        ctx.moveTo(margin, canvasHeight / 2 - (audioData[0] / 2));\r\n        for (let i = 0; i < audioData.length; i++) {\r\n            let x = margin + i * (barWidth + barSpacing);\r\n            let y = canvasHeight / 2 - (audioData[i] / 2);\r\n\r\n            // add coordinates to draw mirrored image\r\n            coords.push([x, canvasHeight / 2 + (audioData[i] / 2)]);\r\n\r\n            if (i < audioData.length - 1) {\r\n                let nextX = margin + (i + 1) * (barWidth + barSpacing);\r\n                let nextY = canvasHeight / 2 - (audioData[i + 1] / 2);\r\n\r\n                if (i === 0) {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n\r\n                // use the midpoint as the control point, interpolating smoothly\r\n                let midX = (nextX + x) / 2;\r\n                let midY = (nextY + y) / 2;\r\n\r\n                ctx.quadraticCurveTo(x, y, midX, midY);\r\n            }\r\n            else {\r\n                // line to the last point\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n\r\n        // draw bottom part, mirrored to be symmetric\r\n        for (let i = coords.length - 1; i > 0; i--) {\r\n            let x = coords[i][0];\r\n            let y = coords[i][1];\r\n\r\n            if (i < audioData.length - 1) {\r\n                let nextX = coords[i - 1][0];\r\n                let nextY = coords[i - 1][1];\r\n\r\n                if (i === 0) {\r\n                    ctx.lineTo(x, y);\r\n                }\r\n\r\n                let midX = (nextX + x) / 2;\r\n                let midY = (nextY + y) / 2;\r\n\r\n                ctx.quadraticCurveTo(x, y, midX, midY);\r\n            }\r\n            else {\r\n                // line to the last point\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n\r\n        ctx.closePath();\r\n\r\n        let gradient = utils.getLinearGradient(ctx, 0, 0, canvasWidth, 0, [\r\n            { percent: 0, color: TESLA_COLORS[0] },\r\n            { percent: +middle - 0.05 < 0.01 ? 0 : +middle - 0.05, color: TESLA_COLORS[0] },\r\n            { percent: +middle + 0.05 > 0.99 ? 0.99 : +middle + 0.05, color: TESLA_COLORS[1] },\r\n            { percent: middle, color: TESLA_COLORS[1] }\r\n        ]);\r\n        ctx.fillStyle = gradient;\r\n        ctx.fill();\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    // 5 - draw circles\r\n    if (params.showCircles) {\r\n        let maxRadius = canvasHeight / 4;\r\n        ctx.save();\r\n        ctx.globalAlpha = 0.5;\r\n\r\n        audioData.forEach((element, i) => {\r\n            let percent = element / 255;\r\n\r\n            // red-ish circles\r\n            let circleRadius = percent * maxRadius;\r\n            ctx.beginPath();\r\n            ctx.fillStyle = utils.makeColor(58, 99, 166, 0.34 - percent / 3.0);\r\n            ctx.arc(canvasWidth / 2, canvasHeight / 2, circleRadius, 0, 2 * Math.PI, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n\r\n            // blue-ish circles, bigger, more transparent\r\n            ctx.beginPath();\r\n            ctx.fillStyle = utils.makeColor(88, 66, 184, 0.1 - percent / 10.0);\r\n            ctx.arc(canvasWidth / 2, canvasHeight / 2, circleRadius * 1.5, 0, 2 * Math.PI, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n\r\n            // yellow-ish circles, smaller\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = utils.makeColor(40, 121, 91, 0.5 - percent / 5.0);\r\n            ctx.arc(canvasWidth / 2, canvasHeight / 2, circleRadius * 0.5, 0, 2 * Math.PI, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n            ctx.restore();\r\n        });\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    if (params.showTeslas) {\r\n        teslaSprites.forEach(sprite => {\r\n            sprite.update(audioData);\r\n            sprite.draw(ctx);\r\n        })\r\n    }\r\n}\r\n\r\nexport { setupCanvas, draw, DrawParams, GradientEntry };","import { getRandom } from \"./utils\"\r\n\r\ntype TeslaParams = {\r\n    x: number,\r\n    y: number,\r\n    color: string\r\n    radius: number,\r\n    radiusVariance: number,\r\n    arcs: number,\r\n    segments: number,\r\n    segmentJitter: number,\r\n    lineWidth: number,\r\n    dataStart: number,\r\n    dataEnd: number\r\n};\r\n\r\nclass TeslaSprite {\r\n    x: number; y: number;\r\n    color: string;\r\n    radius: number; radiusVariance: number;\r\n    arcs: number; segments: number; segmentJitter: number;\r\n    lineWidth: number;\r\n    dataStart: number; dataEnd: number;\r\n\r\n    constructor({ x, y, color, radius, radiusVariance, arcs, segments, segmentJitter, lineWidth, dataStart, dataEnd }: TeslaParams) {\r\n        Object.assign(this, { x, y, color, radius, radiusVariance, arcs, segments, segmentJitter, lineWidth, dataStart, dataEnd });\r\n    }\r\n\r\n    update(audioData: Uint8Array) {\r\n        // creates a split of data, then finds the average value from that data to update the lightning\r\n        const length = audioData.length || 0;\r\n        const start = Math.floor(this.dataStart * length);\r\n        const end = Math.round(this.dataEnd * length);\r\n\r\n        const split = audioData.slice(start, end);\r\n\r\n        const audioAvg = split.reduce((total, num) => total + num, 0) / (end - start);\r\n\r\n        this.radius = audioAvg;\r\n        this.radiusVariance = audioAvg;\r\n        this.arcs = Math.round(audioAvg / 30);\r\n        this.segmentJitter = (1.3 - (this.dataEnd - this.dataStart)) * 8;\r\n    }\r\n\r\n    updateX(newX: number) {\r\n        this.x = newX;\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n\r\n        for (let i = 1; i <= this.arcs; i++) {\r\n            const vec = this.randomVec();\r\n\r\n            let prevSegmentVec = new Vector2(0, 0);\r\n            let curSegmentVec = new Vector2(0, 0);\r\n\r\n            for (let j = 0; j < this.segments; j++) {\r\n                curSegmentVec = vec.scaled(j / this.segments);\r\n\r\n                curSegmentVec = curSegmentVec.addNoise(this.segmentJitter);\r\n\r\n                ctx.strokeStyle = this.color;\r\n                ctx.lineWidth = this.lineWidth;\r\n\r\n                ctx.globalAlpha = this.radius / 255;\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(this.x + prevSegmentVec.x, this.y + prevSegmentVec.y);\r\n                ctx.lineTo(this.x + curSegmentVec.x, this.y + curSegmentVec.y);\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n                prevSegmentVec = curSegmentVec;\r\n            }\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    randomVec() {\r\n        // get random direction, multiplied by radius with jitter\r\n        let radius = this.radius + getRandom(-this.radiusVariance, this.radiusVariance);\r\n        // clamp to 0\r\n        if (radius < 0) {\r\n            radius = 0;\r\n        }\r\n\r\n        const angle = getRandom(0, Math.PI * 2);\r\n\r\n        const x = Math.cos(angle) * radius;\r\n        const y = Math.sin(angle) * radius;\r\n\r\n        return new Vector2(x, y);\r\n    }\r\n}\r\n\r\nclass Vector2 {\r\n    x: number; y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    normalized() {\r\n        let length: number = this.length();\r\n        return new Vector2(this.x / length, this.y / length);\r\n    }\r\n\r\n    length() {\r\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\r\n    }\r\n\r\n    scaled(value: number) {\r\n        return new Vector2(this.x * value, this.y * value);\r\n    }\r\n\r\n    addNoise(value: number) {\r\n        return new Vector2(this.x + getRandom(-value, value), this.y + getRandom(-value, value));\r\n    }\r\n}\r\n\r\nexport { TeslaSprite };","type BGCircleParams = {\r\n    x: number,\r\n    y: number,\r\n    radius: number,\r\n    dx: number,\r\n    dy: number,\r\n    canvasWidth: number,\r\n    canvasHeight: number,\r\n    color: string\r\n};\r\n\r\nclass BGCircle {\r\n    x: number; y: number;\r\n    radius: number;\r\n    dx: number; dy: number;\r\n    canvasWidth: number; canvasHeight: number;\r\n    color: string;\r\n\r\n    constructor({ x, y, radius, dx, dy, canvasWidth, canvasHeight, color }: BGCircleParams) {\r\n        Object.assign(this, { x, y, radius, dx, dy, canvasWidth, canvasHeight, color });\r\n    }\r\n\r\n    update() {\r\n        if (this.x + this.radius > this.canvasWidth || this.x - this.radius < 0) {\r\n            this.dx = -this.dx;\r\n        }\r\n        if (this.y + this.radius > this.canvasHeight || this.y - this.radius < 0) {\r\n            this.dy = -this.dy;\r\n        }\r\n\r\n        this.x += this.dx;\r\n        this.y += this.dy;\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n\r\n        ctx.fillStyle = this.color;\r\n        ctx.beginPath();\r\n        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport { BGCircle };","/*\r\n    main.js is primarily responsible for hooking up the UI to the rest of the application \r\n    and setting up the main event loop\r\n*/\r\n\r\n// We will write the functions in this file in the traditional ES5 way\r\n// In this instance, we feel the code is more readable if written this way\r\n// If you want to re-write these as ES6 arrow functions, to be consistent with the other files, go ahead!\r\n\r\nimport * as utils from './utils';\r\nimport * as audio from './audio'\r\nimport * as canvas from './visualizer';\r\nimport { DefaultSong } from './enums';\r\n\r\nconst drawParams: canvas.DrawParams = {\r\n    showGradient: true,\r\n    showBars: true,\r\n    showCircles: true,\r\n    showTeslas: true,\r\n    timeDomain: false,\r\n    coilCenter: 0.5\r\n};\r\n\r\nconst DEFAULT_FPS = 60;\r\nconst JSON_FILE_PATH = \"data/av-data.json\";\r\n\r\nconst loadJSON = () => {\r\n    fetch(JSON_FILE_PATH)\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            // setup title\r\n            const pageTitle = document.querySelector(\"title\");\r\n            const titleElement = document.querySelector(\"#title\");\r\n            pageTitle.innerHTML = data.title;\r\n            titleElement.innerHTML = data.title;\r\n\r\n            // setup options\r\n            const trackSelect = document.querySelector(\"#track-select\");\r\n            const tracks = data.audio_files;\r\n            const options = tracks\r\n                .map(track => `<option value=\"${track.filepath}\">${track.metadata.title}</option>`)\r\n                .join(\"\\n\");\r\n            trackSelect.innerHTML = options;\r\n\r\n            // setup instructions\r\n            const instructionsElement = document.querySelector(\"#instructions\");\r\n            instructionsElement.innerHTML = data.instructions;\r\n        })\r\n        .catch(error => {\r\n            console.log(`Warning, error occurred: ${error}`);\r\n            return null;\r\n        })\r\n};\r\n\r\nconst init = () => {\r\n    audio.setupWebAudio(DefaultSong.sound1);\r\n\r\n    // load items from JSON\r\n    loadJSON();\r\n\r\n    let canvasElement = document.querySelector(\"#fg-canvas\") as HTMLCanvasElement; // hookup <canvas> element\r\n    let canvasDiv = document.querySelector(\"#canvas\") as HTMLDivElement;\r\n    setupUI(canvasElement, canvasDiv);\r\n\r\n    canvas.setupCanvas(canvasElement, audio.analyserNode);\r\n\r\n    loop();\r\n}\r\n\r\nconst setupUI = (canvasElement: HTMLCanvasElement, canvasDiv: HTMLDivElement) => {\r\n    // A - hookup fullscreen button\r\n    const fsButton = document.querySelector(\"#fs-button\") as HTMLButtonElement;\r\n\r\n    // add .onclick event to button\r\n    fsButton.onclick = e => {\r\n        utils.goFullscreen(canvasDiv);\r\n    };\r\n\r\n    // B - hookup play button\r\n    const playButton = document.querySelector(\"#play-button\") as HTMLButtonElement;\r\n\r\n    playButton.onclick = e => {\r\n        // check if context is in suspened state (autoplay policy)\r\n        if (audio.audioCtx.state == \"suspended\") {\r\n            audio.audioCtx.resume();\r\n        }\r\n\r\n        const target = e.target as HTMLButtonElement;\r\n        if (target.dataset.playing == \"no\") {\r\n            // if track is currently paused, play it\r\n            audio.playCurrentSound();\r\n            target.dataset.playing = \"yes\";\r\n        }\r\n        // if track is playing, pause it\r\n        else {\r\n            audio.pauseCurrentSound();\r\n            target.dataset.playing = \"no\";\r\n        }\r\n    };\r\n\r\n    // C - hookup volume slider & label\r\n    let volumeSlider = document.querySelector(\"#volume-slider\") as HTMLInputElement;\r\n    let volumeLabel = document.querySelector(\"#volume-label\") as HTMLLabelElement;\r\n\r\n    // add .oninput event to slider\r\n    volumeSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        //set the gain\r\n        audio.setVolume(target.value);\r\n\r\n        const numValue = Number(target.value);\r\n        // update value of label to match value of slider\r\n        volumeLabel.innerHTML = String(Math.round((numValue / 2 * 100)));\r\n    };\r\n\r\n    // set value of label to match initial value of slider\r\n    volumeSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    // setup sliders for distortion and pan\r\n    let distortionSlider = document.querySelector(\"#distortion-slider\") as HTMLInputElement;\r\n    let distortionLabel = document.querySelector(\"#distortion-label\") as HTMLLabelElement;\r\n\r\n    distortionSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        // set distortion\r\n        audio.setDistortion(target.value);\r\n\r\n        const numValue = Number(target.value);\r\n        // update label\r\n        distortionLabel.innerHTML = String(Math.round(numValue));\r\n    };\r\n\r\n    // initial value\r\n    distortionSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    let panSlider = document.querySelector(\"#pan-slider\") as HTMLInputElement;\r\n    let panLabel = document.querySelector(\"#pan-label\") as HTMLLabelElement;\r\n\r\n    panSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        // set pan\r\n        audio.setPan(target.value);\r\n\r\n        // update label\r\n        panLabel.innerHTML = target.value;\r\n    };\r\n\r\n    // initial value\r\n    panSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    let coilSlider = document.querySelector(\"#coil-slider\") as HTMLInputElement;\r\n    let coilLabel = document.querySelector(\"#coil-label\") as HTMLLabelElement;\r\n\r\n    coilSlider.oninput = e => {\r\n        const target = e.target as HTMLInputElement;\r\n\r\n        // set pan\r\n        drawParams.coilCenter = Number(target.value);\r\n        // update label\r\n        coilLabel.innerHTML = target.value;\r\n    };\r\n\r\n    // initial value\r\n    coilSlider.dispatchEvent(new Event(\"input\"));\r\n\r\n    // D - hookup track <select>\r\n    let trackSelect = document.querySelector(\"#track-select\") as HTMLSelectElement;\r\n    // add .onchange event to <select>\r\n    trackSelect.onchange = e => {\r\n        const target = e.target as HTMLSelectElement;\r\n\r\n        audio.loadSoundFile(target.value);\r\n        // pause the current track if it is playing\r\n        if (playButton.dataset.playButton == \"yes\") {\r\n            playButton.dispatchEvent(new MouseEvent(\"click\"));\r\n        }\r\n    };\r\n\r\n    // E - setup and hookup checkboxes\r\n    const gradientCB = document.querySelector(\"#gradient-cb\") as HTMLInputElement;\r\n    const barsCB = document.querySelector(\"#bars-cb\") as HTMLInputElement;\r\n    const circlesCB = document.querySelector(\"#circles-cb\") as HTMLInputElement;\r\n    const teslaCB = document.querySelector(\"#tesla-cb\") as HTMLInputElement;\r\n    const domainCB = document.querySelector(\"#domain-type-cb\") as HTMLInputElement;\r\n\r\n    // everything is checked to start\r\n    gradientCB.checked = drawParams.showGradient;\r\n    barsCB.checked = drawParams.showBars;\r\n    circlesCB.checked = drawParams.showCircles;\r\n    teslaCB.checked = drawParams.showTeslas;\r\n    domainCB.checked = drawParams.timeDomain;\r\n\r\n    // add event listeners for everything\r\n    gradientCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showGradient = !drawParams.showGradient;\r\n        gradientCB.checked = drawParams.showGradient;\r\n    });\r\n\r\n    barsCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showBars = !drawParams.showBars;\r\n        barsCB.checked = drawParams.showBars;\r\n    });\r\n\r\n    circlesCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showCircles = !drawParams.showCircles;\r\n        circlesCB.checked = drawParams.showCircles;\r\n    });\r\n\r\n    teslaCB.addEventListener(\"change\", (e) => {\r\n        drawParams.showTeslas = !drawParams.showTeslas;\r\n        teslaCB.checked = drawParams.showTeslas;\r\n    });\r\n\r\n    domainCB.addEventListener(\"change\", (e) => {\r\n        drawParams.timeDomain = !drawParams.timeDomain;\r\n        domainCB.checked = drawParams.timeDomain;\r\n    });\r\n\r\n} // end setupUI\r\n\r\nconst loop = () => {\r\n    // run at 60 FPS always\r\n    setTimeout(() => {\r\n        loop();\r\n    }, 1000 / DEFAULT_FPS);\r\n\r\n    canvas.draw(drawParams);\r\n}\r\n\r\nexport { init };","import * as main from \"./main\";\r\n\r\nwindow.onload = () => {\r\n    // 1 - do preload here - load fonts, images, additional sounds, etc...\r\n\r\n    // 2 - start up app\r\n    main.init();\r\n}"],"names":["AudioDefaults","DefaultSong","audioCtx","sourceNode","analyserNode","gainNode","waveShaperNode","stereoPannerNode","makeColor","red","green","blue","alpha","getRandom","min","max","Math","random","Uint8Array","NUM_SAMPLES","ctx","ctxBG","canvasWidth","canvasHeight","makeDistortionCurve","amount","k","n_samples","curve","Float32Array","deg","PI","i","x","abs","loadSoundFile","filePath","src","y","color","radius","radiusVariance","arcs","segments","segmentJitter","lineWidth","dataStart","dataEnd","Object","assign","this","update","audioData","length","start","floor","end","round","audioAvg","slice","reduce","total","num","updateX","newX","draw","save","vec","randomVec","prevSegmentVec","Vector2","curSegmentVec","j","scaled","addNoise","strokeStyle","globalAlpha","beginPath","moveTo","lineTo","closePath","stroke","restore","angle","cos","sin","normalized","sqrt","pow","value","dx","dy","fillStyle","arc","fill","teslaSprites","TESLA_COLORS","CIRCLE_COLORS","circles","drawParams","showGradient","showBars","showCircles","showTeslas","timeDomain","coilCenter","setupUI","canvasElement","canvasDiv","document","querySelector","onclick","e","element","requestFullscreen","mozRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","playButton","state","resume","target","dataset","playing","play","pause","volumeSlider","volumeLabel","oninput","numValue","Number","gain","innerHTML","String","dispatchEvent","Event","distortionSlider","distortionLabel","panSlider","panLabel","pan","coilSlider","coilLabel","onchange","MouseEvent","gradientCB","barsCB","circlesCB","teslaCB","domainCB","checked","addEventListener","loop","setTimeout","params","getByteTimeDomainData","getByteFrequencyData","middle","clearRect","fillRect","forEach","circle","barWidth","margin","spriteOneX","spriteTwoX","coords","push","nextX","nextY","midX","midY","quadraticCurveTo","gradient","startX","startY","endX","endY","colorStops","lg","createLinearGradient","addColorStop","percent","circleRadius","sprite","window","onload","AudioContext","sound1","Audio","createMediaElementSource","createAnalyser","fftSize","createGain","GAIN","createWaveShaper","DISTORTION","oversample","createStereoPanner","PAN","connect","destination","fetch","then","response","json","data","pageTitle","titleElement","title","trackSelect","options","audio_files","map","track","filepath","metadata","join","instructions","catch","error","console","log","analyserNodeRef","getContext","width","height","TeslaSprite","BGCircle"],"ignoreList":[],"sourceRoot":""}